### Интерфейс сокетов

**Сокет** - страндарт интерфейсов взаимодействия программ с транспортным уровнем стека протоколов TCP/IP.

![alt text](src2/img13.png)

|Операция|Назначение                             |
|--------|---------------------------------------|
|Socket  |Создать новый сокет                    |
|Bind    |Связать сокет с IP-адресом             |
|Listen  |Объявить о желании принимать соединения|
|Accept  |Принять запрос на установку соединения |
|Connect |Установить соединение                  |
|Send    |Отправить данные по сет                |
|Receive |Получить данные по сети                |
|Close   |Закрыть соединение                     |

Взаимодействуют стороны по принципу _клиент - сервер_
Создается сокет (указывается протокол сетевого и транспортного уровня) -> Биндится на IP и порт **BIND** -> Выполняется операция **LISTEN** - готовы принимать соединение (создается очередь) -> **ACCEPT** (ждем соединения. возврат произойдет, когда какой-то из клиентов установит соединение)
На стороне клиента также создается сокет -> вызов метода **CONNECT** (соединение с сервером) -> Отправка данных порциями байт **SEND** (на стороне сервера прием данных **RECEIVE**) -> разрываем соединение **CLOSE**.

![alt text](src2/img14.png)

### Трансляция сетевых адресов (NAT)

_**NAT** (Network Adress Translation)_ - технология преобразования IP-адресов внутренней сети в IP-адреса внешней (интернет). Цель создания - преодоление проблемы нехватки IPv4.

**Типы NAT:**
1. Статический NAT - отображение 1 к 1
2. Динамическое преобразование - набор внутренних IP отображается на группу внешних
3. Один ко многим - все адреса из внутренней сети отожражаются на один внешний 

Преобразование происходит с помощию NAT таблицы, которая находится внутри устройства. Пакет внутренней сети преобразуется следующим образом - в качестве IP отправителя записывается IP сети, а порт генерируется случайно. Эти данные записываются в таблицу, где указываются также и внутренний IP хоста.

![alt text](src2/img15.png)

Недостатки:
- нарушение принципа IP-сетей: каждый компьютер может соединиться с любым другим
- нет возможности подключиться к компьютерам во внутренней сети из внешнего мира
- плохо работают протоколы не устанавливающие соединение
- некоторые прикладные протоколы работают неправильно (FTP)
- нет единого стандарта NAT 

### Межсетевые экраны


