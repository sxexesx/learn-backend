## REST

### Что такое REST?

**REST** (REpresentational State Transfer) - принцип взаимодействия клиента и сервера, основанные на понятиях "ресурса"
и "глагола". В случае HTTP, ресура - это _uri_, глагол - это метод.

Концепции:

1. Взаимодействие клиент-сервер
2. Система может быть многоуровневой
3. Сервер не должен обладать состоянием. Клиент и сервер каждый раз общаются как в первый раз
4. Единообразный унифицированный интерфейс
5. Кэширование

### REST API [Best practices](https://habr.com/ru/articles/351890/)

1. Конечные точки в URL - имя существительное (_frames_ вместо _getFrames_, _updateFrames_, ...)
2. Множественное число (_frames_, _frames/{id}_ вместо _frame_, _frame/{id}_)
3. Документация :)
4. Версионирование (_host/v1/frames/_)
5. Пагинация
6. Использование SSL
7. Разные HTTP-методы
8. Разные коды

## Что такое CORs?

_**CORS** (Cross-origin request sharing)_ - механизм, который разрешает серверу указывать источники, с которых браузеру
разрешено будет выполнить загрузку, отличные от его собственных.

<div>
  <img width="500" height="370" src="src3/img01.png" alt="">
</div>

Категории доступа тэгов:

1. Запись из из разных источников (ссылки, переадресации, отправка форм). С активным CORS эти операции будут разрешены.
2. Вставка из разных источников (script, link, img, video, ...)
3. Считывание из разных источников (тэги загружаемые через выховы AJAX/fetch). По умолчанию заблокированы браузером

Источник идентифицируется тройкой параметров: схема, имя хоста, порт. Если хотя бы из трех элементов у двух источников
отличается, то ресурсы считаются разными и такие запросы будут блокироваться. Другими словами, если пользователь
находится на сайте, на котором в тэге `<script>` будет выполняться код, который будет запрашивать ресурсы другого сайта,
то такой код будет блокироваться ошибкой _Cross-Origin Request Blocked_.

Заметки:

- На сайт, не ограниченный платным доступом, не требующий аутентификацию и авторизацию можно
  установить: `Access-Control-Allow-Origin: *`
- На сторонний (например) аналитический API хорошо устанавливать набор заголовков `Access-Control-Allow-Origin`, чтобы
  API не пропустила лишние вредоносные запросы
- Полезно пропускать куки в запросах между разными источниками (`Access-Control-Allow-Credentials: true`) когда вы
  точно знаете какие клиенты будут иметь доступ к вашему серверу.

## SOAP

SOAP - протокол обмена структурированными сообщениями.
Используется с любым протоколом прикладного уровня: Http, smtp, ftp...  
Для описания используется WSDL - web services description language. Состоит из трех обязательных частей:

1. envelop - корневой элемент. начало и конец сообщения
2. header - заголовки. определяются дополнительные свойства для приложения
3. body - тело запроса в котором описаны полезные данные

## WebSocket

WebSocket - протокол, в котором устанавливается постоянное подключение между клиентом и сервером.

## RPC

_**RPC** (Remote Procedure Call)_ - удаленный вызов процедур

<div>
  <img width="400" height="300" src="src3/img03.png" alt="">
</div>

Сервер реализует метод `doSomething` (процедура). На клиенте этот метод не реализован, но он может его вызвать, как
будто он реализован у него.

gRPC - реализация RPC от Google

Преимущества:

1. Используется HTTP/2, а не HTTP 1.1 (быстрее на 10%)
2. Работает быстрее
3. Простой и быстрый стриминг данных
4. Вместо json используется бинарный формат (protobuf)
5. Много инструментария из коробки (кодогенерация, потоковая передача данных...)

tRPC - type-safe RPC

## SSL/TLS

_**TLS** (Transport Layer Security)_ - протокол защиты транспортного уровня
_**SSL** (Secure Sockets Layer)_ - уровень защиты сокетов (устарел)

Семейство протоколов для безопасной передачи данных. Используются протоколами прикладного уровня: HTTPs, SMTPs, POP3s,
IMAPs. Соответствует тремя уровням модели OSI:  
* Транспортный - передача данных между процессами
* Сеансовый - восстановление сеанса шифрования, который был установлен ранее для повышения производительности
* Представление - представление данных в зашифрованном виде

Безопасность передачи данных включает:
1. Приватность (privacy)
2. Целостность (integrity) - для соблюдения целостности используются **хэш-функции**
3. Аутентификация (authentication) - используется цифровая подпись, инфраструктура открытых ключей

<div>
  <img width="400" height="200" src="src3/img04.png" alt="">
</div>


---------------------------
<div>
  <img width="500" height="370" src="src3/img02.png" alt="">
</div>