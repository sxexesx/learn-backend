## Сетевой уровень

Объединяет сети, построенные на основе разных технологий (ethernet, Wi-Fi, 5G/4G/3G, MPLS и другие). Является основой интернет.

Задачи:
- Объединение сетей (internetworking). Создаение составной сети на базе технологий канального уровня
- Маршрутизация - поиск маршрута в составной сети, где может быть много активных соединение
- Обеспечение качества обслуживания

Решает проблемы:
- различия технологий канального уровня
- ограничения по масштабируемости

### Различия сетей

1. **Сервис:**
* без гарантии доставки (ethernet)
* с гарантией доставки (Wi-Fi)
* c гарантией доставки и порядка следования сообщения (пока не существует)
> **Решение:**
> Кадры из WiFi принимаются сотправкой подтверждения, а в Ethernet отправляются без подтверждений

2. **Адресация:**
* Разный размер, плоская, иерархическая
* MAC - Ethernet/WiFi, IMEI - сети сотовой связи
> **Решение:**
> Вводятся глобальные адреса, не зависимые от конкретных технологий.
> Методы преобразования глобального адреса в локальный (ARP для TCP/IP).

3. **Широковещание:**
* Поддерживается или нет
> **Решение:**
> Пакеты отправляются всем хостам в сети по индивидуальным адресам

4. **Максимальный размер кадра:** (MTU)
* Ethernet - 1500
* WiFi - 2304

5. **Формат кадра**
> **Решение:**
> Согласование размера кадра - фрагментация

### Ограничения по масштабируемости

1. Коммутаторы используют таблицы коммутации. Невозможно использовать коммутатор с таблицей всех устройств

2. Отправка пакетов на все порты. Если нет конкретного получателя, то отправка происходит всем, т.о. образом мы "засорим" сеть мусорными пакетами

3. Отсутствие дублирующих путей приводит к тому, что отправка в соседние точки сети может занимать продолжительное время

> **Решения:**
> 1. Агрегация. Работа не с отдельными адреса, а с блоками адресов. Каждый блок - это сеть.
> 2. Запрет отправки "муссорных" пакетов у которых путь доствки не известен
> 3. Возможность наличия нескольких путей в сети. Наличие маршрутизации.

![Alt text](src/img22.png)
